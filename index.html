<!DOCTYPE html>
<html>
<head>
    <title>Personal Finance Tracker</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            padding: 20px;
        }

        .box {
            background-color: white;
            padding: 20px;
            width: 400px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        h1, h2 {
            text-align: center;
        }

        input, select, button {
            width: 100%;
            padding: 8px;
            margin-top: 8px;
        }

        ul {
            margin-top: 10px;
        }

        /* Progress bar */
        .progress-container {
            background: #ddd;
            width: 100%;
            height: 15px;
            border-radius: 5px;
            margin-top: 5px;
        }

        .progress-bar {
            background: #4CAF50;
            height: 100%;
            width: 0%;
            border-radius: 5px;
        }
    </style>
</head>

<body>

<h1>Personal Finance Tracker</h1>

<!--  EXPENSE  -->
<div class="box">
    <h2>Expense Tracker</h2>

    <input type="number" id="expenseAmount" placeholder="Expense amount">

    <select id="expenseCategory">
        <option value="">Select category</option>
        <option>Food</option>
        <option>Transport</option>
        <option>Shopping</option>
        <option>Other</option>
    </select>

    <input type="date" id="expenseDate">
    <input type="text" id="expenseDesc" placeholder="Description (optional)">

    <button onclick="addExpense()">Add Expense</button>

    <ul id="expenseList"></ul>
</div>

<!-- INCOME -->
<div class="box">
    <h2>Income Manager</h2>

    <input type="number" id="incomeAmount" placeholder="Income amount">
    <input type="text" id="incomeSource" placeholder="Income source">

    <select id="incomeFrequency">
        <option value="">Select frequency</option>
        <option>Monthly</option>
        <option>Weekly</option>
        <option>One-time</option>
    </select>

    <button onclick="addIncome()">Add Income</button>

    <ul id="incomeList"></ul>
</div>


<div class="box">
    <h2>Budget Tracker</h2>

    <select id="budgetCategory">
        <option value="">Select category</option>
        <option>Food</option>
        <option>Transport</option>
        <option>Shopping</option>
        <option>Other</option>
    </select>

    <input type="number" id="budgetAmount" placeholder="Monthly budget">

    <button onclick="setBudget()">Set Budget</button>

    <div id="budgetStatus"></div>
</div>

<script>
    /* EXPENSE  */
    var expenses = [];

    function addExpense() {
        var amount = Number(document.getElementById("expenseAmount").value);
        var category = document.getElementById("expenseCategory").value;
        var date = document.getElementById("expenseDate").value;
        var desc = document.getElementById("expenseDesc").value;

        if (amount === 0 || category === "" || date === "") {
            alert("Please fill all expense fields");
            return;
        }

        expenses.push({ amount, category, date, desc });
        displayExpenses();
        updateBudgetProgress();

        document.getElementById("expenseAmount").value = "";
        document.getElementById("expenseCategory").value = "";
        document.getElementById("expenseDate").value = "";
        document.getElementById("expenseDesc").value = "";
    }

    function displayExpenses() {
        var list = document.getElementById("expenseList");
        list.innerHTML = "";

        for (var i = 0; i < expenses.length; i++) {
            var li = document.createElement("li");
            li.innerText =
                expenses[i].date + " | " +
                expenses[i].category + " | ₹" +
                expenses[i].amount;
            list.appendChild(li);
        }
    }

    /* INCOME  */
    var incomes = [];

    function addIncome() {
        var amount = document.getElementById("incomeAmount").value;
        var source = document.getElementById("incomeSource").value;
        var frequency = document.getElementById("incomeFrequency").value;

        if (amount === "" || source === "" || frequency === "") {
            alert("Please fill all income fields");
            return;
        }

        incomes.push({ amount, source, frequency });
        displayIncome();

        document.getElementById("incomeAmount").value = "";
        document.getElementById("incomeSource").value = "";
        document.getElementById("incomeFrequency").value = "";
    }

    function displayIncome() {
        var list = document.getElementById("incomeList");
        list.innerHTML = "";

        for (var i = 0; i < incomes.length; i++) {
            var li = document.createElement("li");
            li.innerText =
                incomes[i].source + " | ₹" +
                incomes[i].amount + " | " +
                incomes[i].frequency;
            list.appendChild(li);
        }
    }

    /* PHASE-4: BUDGET  */
    var budgets = {};

    function setBudget() {
        var category = document.getElementById("budgetCategory").value;
        var amount = Number(document.getElementById("budgetAmount").value);

        if (category === "" || amount === 0) {
            alert("Please select category and enter budget");
            return;
        }

        budgets[category] = amount;
        updateBudgetProgress();
    }

    function updateBudgetProgress() {
        var statusDiv = document.getElementById("budgetStatus");
        statusDiv.innerHTML = "";

        for (var category in budgets) {
            var spent = 0;

            for (var i = 0; i < expenses.length; i++) {
                if (expenses[i].category === category) {
                    spent += expenses[i].amount;
                }
            }

            var percent = Math.min((spent / budgets[category]) * 100, 100);

            statusDiv.innerHTML +=
                "<p>" + category + ": ₹" + spent + " / ₹" + budgets[category] + "</p>" +
                "<div class='progress-container'>" +
                "<div class='progress-bar' style='width:" + percent + "%'></div>" +
                "</div>";
        }
    }
</script>

</body>
</html>
